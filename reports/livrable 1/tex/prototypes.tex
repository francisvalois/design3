%!TEX root = ../rapport.tex
%!TEX encoding = UTF-8 Unicode

% Chapitres "Introduction"

% modifié par Francis Valois, Université Laval
% 31/01/2011 - version 1.0 - Création du document

\chapter{Description des prototypes}
\label{s:prototypes}
\section{Préhenseur}

Comme dispositif pour le traçage des dessins par le robot, nous opterons pour la solution la plus simple et robuste qui soit. Afin d’éviter d’augmenter inutilement la charge de travail du microcontrôleur, nous avons décidé d’éviter d’utiliser des solutions complexes qui pourraient exiger la production d’un signal particulier par le microcontrôleur. Le signal de sortie que devra produire le celui-ci sera simplement un signal binaire : « 1» lorsque le crayon devra être en mode traçage et « 0 » lorsque le crayon sera soulevé et donc en mode « attente ». Pour maintenir le crayon en position « attente » durant la durée du trajet, nous utiliserons un système de maintien magnétique qui gardera le crayon en position relevé lorsqu’il recevra le signal « 1 » logique. Pour abaisser le crayon et ainsi entrer en mode traçage, nous utiliserons un ressort à faible constante de rappel qui entrera en jeu lorsque le système de maintien magnétique relâchera le crayon « 0 » logique. Il est bien important que la constante de rappel du ressort soit faible pour ne pas briser la mine lors du contact de celle-ci avec la surface de traçage. La constante de rappelle du ressort devra également être inférieur à la force exercée par le système de maintien magnétique qui ramènera le crayon en mode attente une fois le dessin terminé.

\section{ Récepteur et décodeur du signal manchester}

Pour le récepteur du signal d’antenne, nous utiliserons un « tone decoder » qui est utilisé dans de nombreuses applications qui nécessitent la reconnaissance de certaines tonalités bien précises. Comme nous avons besoins de détecter une série tonalités identique qui se suit et forme un code, ce genre de dispositif nous convient parfaitement. Le « tone decoder » recevra le signal émis par l’antenne et détectera si le la tonalité inaudible est émise ou non. Lorsque la fréquence (ou tonalité) sera reçue par le récepteur, celui-ci présentera zéro volt en sortie et à l’opposé, lorsque le récepteur ne détectera pas la fréquence ciblée, il présentera 5V à sa sortie. Il exécutera ces opérations d’une façon suffisamment rapide pour que le segment binaire reçu soit exactement le même que celui transmis, mais complètement opposé étant donné la configuration logique du « tone decoder ».  Ce message sera ensuite inversé par l’unité de traitement suivante et traité pour que le robot exécute la tâche adéquate. L’avantage de cette approche est que le « tone decoder » est un circuit intégré très robuste aux perturbations magnétiques de son environnement, il est peu énergivore et très compact.

\section{Microcontrôleur} \label{s:micro}

Le lien entre le pont en H contrôlant les moteurs, le signal décodé par le récepteur de signal, le préhenseur et le Mac mini sera un microcontrôleur modèle Texas Instrument Stellaris LM3S9B92. Ce microcontrôleur possèdes un grand nombre de broches d'entrée/sortie, 4 PWM, 2 interfaces d'encodeur à quadrature qui permettront le contrôle et l'asservissement des moteurs Il possède également deux ports de communication UART ainsi qu'une interface USB pour la communication avec le Mac mini. Le microcontrôleur peut être programmé en C avec un compilateur, un IDE et des librairies de pilotes de périphériques fournies.   

\section{Affichage sur le robot} \label{s:LCD}

Pour l'affichage sur le robot, nous utiliserons un écran à cristaux liquides 16 x 2  caractères. Cet écran est commandé par 8 lignes de données qui permettent de transmettre des caractères ASCII et 3 lignes de contrôle, RS, R/W et E. Le huitième bit de données peut également servir de "busy flag", ce qui permet de savoir si le contrôleur de l'écran a terminé d'exécuter les dernières instructions. Il est possible d'ajouter des caractères "maison" dans des espaces libres de la mémoire de caractères. Le contraste peut être contrôlé par un potentiomètre qui fourni la référence sur la broche 3. Il peut être alimenté à même le microcontrôleur, en excluant le rétroéclairage, qui n'est pas nécessaire pour distinguer les caratères dans un environnement éclairé. Si le rétroéclairage devait être utilisé, il devra être alimenté sur une source indépendante du microcontrôleur, car il nécessite 150 mA. Les fonctions codées dans les fichiers ecran.h et ecran.c de l'annexe~\ref{} permettent d'envoyer des caractères et des chaînes de caractères sur le LCD et de contrôler le déplacement du curseur.

\section{Communication entre le microcontrôleur et le Mac mini} \label{s:comm_mac_micro}

Comme le microcontrôleur possède une interface USB qui permet la communication avec l'ordinateur via un port série UART, nous utiliserons le port UART pour la communication. 

\section{Alimentation du Mac mini} \label{s:alim_mac_mini}
En ce qui a trait au système d'alimentation du Mac mini, il est nécessaire de considérer l'efficacité énergétique de celle-ci. La tension nominale des batteries applicables au projet se situe rarement au-dessus de la plage de tension d'alimentation du Mac mini. Ce faisant, l'usage d'un régulateur de tension classique qui nécessite une tension supérieure à la tension d'alimentation du Mac mini est impossible, à moins de procéder à une augmentation du potentiel de la batterie. Cependant, même si la tension nécessaire au bon fonctionnement d'un régulateur classique était obtenue par la mise en série de cellules, le régulateur aurait un rendement dans les environs de 50\%. Il est donc à proscrire vu les contraintes de dimensionnement qui pèsent sur la batterie. Ce qui s'offre à la conception de l'alimentation est un système de type «Boost» qui effectue une amplification de la tension continue. Ce type de circuit est le pendant en tension continue du transformateur. En soi, il est possible de réaliser la fonction d'amplification au moyen de composants discrets. Cependant, l'implantation pratique demande beaucoup de temps et de ressources. Il est préférable, vu les coûts de l'électronique actuelle, d'opter pour des composants intégrés qui effectuent le même travail avec des rendements très élevés (de l'ordre du 90\% et plus). Aussi, il est très important de considérer la stabilité de la tension de sortie de l'alimentation. L'utilisation de composant discret permet de fixer l'ondulation de tension à des niveaux inférieurs aux niveaux maximaux du Mac mini ($\pm 200mV$).

\section{Alimentation de l'électronique embarquée}
En ce qui a trait au système d'alimentation de l'électronique embarquée, le niveau de tension requis est de 5V. Comme il est possible de réaliser une tension supérieure à 5V au moyen d'agencement de cellules de batterie, l'utilisation d'un régulateur doit être considérée. Pour les mêmes raisons qu'énoncées dans la section \ref{s:alim_mac_mini}, on constate que le rendement n'est pas suffisamment élevé pour une application embarquée. Comme la tension de la batterie employée risque d'être au dessus de 5V, l'utilisation d'une technologie de type «Boost» est impossible. Il existe cependant la technologie de type «Buck», qui produit exactement l'effet contraire. L'utilisation de composés discrets requiert davantage de temps. Une solution impliquant des composés intégrés doit être envisagée. Par ailleurs, les rendements de ce type d'alimentation peuvent s'élever à plus de 90\%. Les composantes comme le microcontrôleur requièrent une tension d'alimentation stable. L'emploi d'une alimentation faite à partir de composants intégrés permet de convenir à ce besoin.